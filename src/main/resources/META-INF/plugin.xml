<?xml version="1.0" ?>
<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin require-restart="true">
    <id>com.smallcloud.codify</id>
    <name><![CDATA[Refact – Open-Source AI Agent, Code Generator & Chat]]></name>
    <vendor email="info@smallcloud.ai"
            url="https://refact.ai/?utm_source=jb&amp;utm_medium=marketplace&amp;utm_campaign=plugin">smallcloudai
    </vendor>

    <description><![CDATA[
<h2>Refact.ai – Your Customizable Open-Source AI Software Engineering Agent</h2>
<p>
    Refact.ai is a free, <b>open-source</b> AI Agent that handles engineering tasks end-to-end.
    It deeply understands your codebases and integrates with your tools, databases, and browsers to automate complex, multi-step tasks.
</p>

<ul>
    <li>Integrate AI Agent with the tools you already use, allowing it to complete tasks for you end-to-end.</li>
    <li>Deploy Refact.ai on-premise and maintain <b>100% control over your codebase.</b></li>
    <li>Access State-of-the-Art Models (Claude 3.7 Sonnet, GPT-4o, o3-mini, etc.)</li>
    <li>Bring your own key (BYOK) – Use your own API keys for external LLMs.</li>
    <li>Stop switching between your IDE and chat—Refact.ai has an integrated chat right in your IDE.</li>
    <li>Get free, unlimited, context-aware auto-completion.</li>
</ul>

<p>
   Suitable for both individual and enterprise use, supporting 25+ programming languages, including Python,
   JavaScript, Java, Rust, TypeScript, PHP, C++, C#, Go, and more.
</p>

<p>
    We can’t say it better than our users: <i>'Refact.ai understands me better than my human coworkers.
    It's like working in perfect sync with an ideal partner.'</i>
</p>

<h2>How does Refact.ai Agent empower developers?</h2>
<ul>
    <li><b>Unlimited accurate auto-completion with context awareness for free</b> – Powered by Qwen2.5-Coder-1.5B,
    Refact.ai uses Retrieval-Augmented Generation (RAG) to provide precise, context-aware code suggestions.
    By retrieving relevant snippets and project-specific insights, it ensures completions that align with your coding style and architecture.</li>
    <li><b>Integrated in-IDE Chat</b> – By deeply understanding your codebases, Refact.ai provides relevant,
    intelligent answers to your questions—right inside your development environment.</li>
    <li><b>Integrated with the tools</b> – Refact.ai goes beyond codebases, connecting with GitHub, GitLab,
    databases (PostgreSQL, MySQL), Pdb, Docker, and any shell command, so AI Agent can autonomously complete tasks—from code generation to deployment.</li>
    <li><b>State-of-the-Art Models</b> – Refact.ai supports <b>Claude 3.7 Sonnet, GPT-4o, and o3-mini</b>,
    allowing you to choose the best model for each task based on its complexity.</li>
    <li><b>Bring your own key (BYOK)</b> – Use your own API keys for external LLMs,
    ensuring flexibility and control over your AI infrastructure.</li>
    <li>Use <b>@-commands</b>  to control what context to use to answer your question:
        <ul>
            <li><b>@web</b> – define a webpage.</li>
            <li><b>@file</b> – upload and attach a single file.</li>
            <li><b>@definition</b> – find and attach a definition.</li>
            <li><b>@references</b> – locate all references and attach them.</li>
            <li><b>@tree</b> – display the workspace directory and files tree.</li>
            <li>Create your own <b>custom system prompt</b> for a more personalized workflow.</li>
        </ul>
    </li>
</ul>

<h2>Refact.ai Agent For Enterprise</h2>

<p>
    Deploying Refact.ai Agent is like adding a 24/7 engineer to your team—one that instantly understands your codebase,
    adapts to your workflows, accelerates development from day one, and becomes a shared knowledge base for your entire team.
</p>

<ul>
    <li><b>Refact.ai already understands your company's context:</b> AI Agent captures the unique structure, tools,
    and workflows of your organization, using your company's databases, documentation, and code architecture to deliver customized solutions.</li>
    <li><b>Gets smarter over time:</b> With each interaction and feedback, Refact.ai Agent adapts to your organization's needs, becoming more accurate and powerful.</li>
    <li><b>Organizes experience into the knowledge base:</b> Refact.ai Agent captures and shares knowledge from
    interactions with each team member. It not only streamlines workflows but also supports faster onboarding and
    smoother cross-functional collaboration across projects.</li>
</ul>
<h2>Take full control of your AI Agent, tailored to your company:</h2>

<ul>
    <li><b>Deploy Refact.ai on-premise:</b> on your own servers or private cloud. Your data never leaves your control.
    Telemetry from the plugins goes to your server and nowhere else. You can verify what the code does, it's open source.</li>
    <li><b>Fine-tune a model on your codebase:</b> A fine-tuned code completion model will provide you with
    more relevant suggestions: it can memorize your coding style, the right way to use your internal APIs, and the tech stack you use.</li>
    <li><b>Priority Support:</b> Our engineers are always available to assist you at every stage, from setup to fine-tuning and beyond.</li>
</ul>

<p>
    <b>To get a 2-week free trial</b> for your team, just fill out the form on <a href="https://refact.ai/contact/?utm_source=jetbrains&utm_medium=marketplace&utm_campaign=enterprise">our website</a>. We'll reach out with more details!
</p>

<h2>Which tasks can Refact.ai help me with?</h2>
<ul>
    <li><b>Generate code from natural language prompts (even if you make typos)</b> –
    Instantly turn ideas into functional code, accelerating development and eliminating the blank-screen problem.</li>

    <li><b>Refactor code</b> - Improve code quality, readability, and efficiency with automated refactoring that aligns with best practices.</li>
    <li><b>Explain code</b> - Quickly understand complex or unfamiliar code with AI-generated explanations, making collaboration and onboarding faster.</li>
    <li><b>Debug code</b> - Detect and fix errors faster with intelligent debugging, reducing time spent troubleshooting issues.</li>
    <li><b>Generate unit tests</b> - Ensure code reliability by automatically creating comprehensive unit tests.</li>
    <li><b>Code Review</b> - Get AI-assisted code reviews for cleaner, more secure, and more efficient code, addressing developers' top concern: accuracy.</li>
    <li><b>Create Documentation</b> - Automate documentation generation to keep knowledge accessible and up to date.</li>
    <li><b>Generate Docstrings</b> - Enhance maintainability with clear, structured documentation generated for functions and classes in seconds.</li>
</ul>

<h2>Which tasks can Refact.ai help me with?</h2>
<p>
    Connect with other developers in our <b><a href="https://www.smallcloud.ai/discord">Discord community</a></b>. Ask questions, share your opinion, propose new features.
</p>
]]></description>

    <change-notes><![CDATA[
<p>Refact.ai is an AI coding assistant, available for JetBrains IDEs and Visual Studio Code.</p>

<li>RustRover support.</li>
<li>All new plugins are powered by <a href="https://github.com/smallcloudai/refact-lsp">Refact LSP</a>, our new open-source server written in Rust! Refact LSP converts high-level code completion, or chat requests into low-level LLM prompts and converts results back. </li>
<li>Bugfixes and performance improvements</li>
</ul>

<p>Our code completion is now faster and more responsive with improved indentation, multiline code completion and chat responsiveness.</p>

<p>In the Pro version, you can enjoy all of those AI features,
integrated into a single package that follows your privacy settings.</p>

<p>Check out our Trial version, ready to start working for you in seconds!</p>
]]></change-notes>


    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.modules.vcs</depends>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="com.smallcloud.refactai.PluginState"/>
        <postStartupActivity implementation="com.smallcloud.refactai.Initializer"/>
        <config.codeVisionGroupSettingProvider implementation="com.smallcloud.refactai.code_lens.RefactOpenChatSettingProvider"/>
        <config.codeVisionGroupSettingProvider implementation="com.smallcloud.refactai.code_lens.RefactOpenProblemsSettingProvider"/>
        <config.codeVisionGroupSettingProvider implementation="com.smallcloud.refactai.code_lens.RefactOpenExplainSettingProvider"/>
        <editorFactoryDocumentListener implementation="com.smallcloud.refactai.listeners.DocumentListener"/>
        <editorFactoryDocumentListener implementation="com.smallcloud.refactai.codecompletion.RefactInlineCompletionDocumentListener"/>
        <editorFactoryDocumentListener implementation="com.smallcloud.refactai.listeners.LSPDocumentListener"/>
        <statusBarWidgetFactory id="Refact AI Status Bar"
                                implementation="com.smallcloud.refactai.status_bar.SMCStatusBarWidgetFactory"/>
        <notificationGroup id="Refact AI Notification Group" displayType="BALLOON"/>

        <applicationConfigurable parentId="tools"
                                 instance="com.smallcloud.refactai.settings.AppSettingsConfigurable"
                                 id="refactai_advanced_settings"
                                 displayName="Refact.ai"/>
        <errorHandler implementation="com.smallcloud.refactai.PluginErrorReportSubmitter"/>

        <actionPromoter implementation="com.smallcloud.refactai.listeners.InlineActionsPromoter"/>
        <actionPromoter implementation="com.smallcloud.refactai.listeners.AcceptActionsPromoter"/>
        <actionPromoter implementation="com.smallcloud.refactai.listeners.ForceCompletionActionPromoter"/>
        <actionPromoter implementation="com.smallcloud.refactai.panes.sharedchat.ChatPaneInvokeActionPromoter"/>
        <inline.completion.provider implementation="com.smallcloud.refactai.codecompletion.RefactAICompletionProvider" order="first"/>
        <toolWindow id="Refact" anchor="right"
                    canCloseContents="true"
                    factoryClass="com.smallcloud.refactai.panes.RefactAIToolboxPaneFactory"/>

        <applicationService serviceImplementation="com.smallcloud.refactai.settings.AppSettingsState"/>
        
        <editorFactoryListener implementation="com.smallcloud.refactai.listeners.LastEditorGetterListener"/>

        <applicationService serviceImplementation="com.smallcloud.refactai.account.AccountManager"/>
        <applicationService serviceImplementation="com.smallcloud.refactai.io.InferenceGlobalContext"/>
        <projectService serviceImplementation="com.smallcloud.refactai.statistic.UsageStats"/>
        <applicationService serviceImplementation="com.smallcloud.refactai.UpdateChecker"/>
        <projectService serviceImplementation="com.smallcloud.refactai.lsp.LSPProcessHolder"/>
        <projectService serviceImplementation="com.smallcloud.refactai.lsp.LSPActiveDocNotifierService" />
        <projectService serviceImplementation="com.smallcloud.refactai.code_lens.CodeLensInvalidatorService" />
        <codeInsight.codeVisionProviderFactory implementation="com.smallcloud.refactai.code_lens.RefactCodeVisionProviderFactory"/>
    </extensions>
    <actions>
        <action class="com.smallcloud.refactai.listeners.TabPressedAction"
                id="InsertInlineCompletionAction"
                text="Accept Inline Completion"
                overrides="true"
                description="Refact AI Accept Inline Completion">
            <add-to-group group-id="InlineCompletion" anchor="first"/>
            <keyboard-shortcut first-keystroke="TAB" keymap="$default"/>
        </action>
        <action class="com.smallcloud.refactai.listeners.CancelPressedAction"
                id="CancelPressedAction"
                text="Cancel Inline Completion"
                description="Refact AI Cancel Inline Completion">
            <keyboard-shortcut first-keystroke="ESCAPE" keymap="$default"/>
        </action>
        <action class="com.smallcloud.refactai.listeners.ForceCompletionAction"
                id="ForceCompletionAction"
                text="Run Code Completion Manually"
                description="Refact AI Make A Manual Trigger Completion">
            <keyboard-shortcut first-keystroke="alt SLASH" keymap="$default"/>
        </action>
        <group id="RefactAIPrivacy" popup="true" class="com.smallcloud.refactai.privacy.RefactAIPrivacyGroupAction">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="EditorTabPopupMenu" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </group>
<!--        For display shortcut on the pane, action must be with mask "Activate${id.filterNot { it.isWhitespace() }}ToolWindow"-->
        <action id="ActivateRefactChatToolWindow"
                text="Open Chat"
                class="com.smallcloud.refactai.panes.sharedchat.ChatPaneInvokeAction">
            <keyboard-shortcut first-keystroke="F1" keymap="$default"/>
        </action>

        <group id="RefactAIChatGroup">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <separator/>
        </group>
<!--        Temporary disable; JB has broken vcs plugin in 2024.3 -->
        <group id="RefactAI.GenerateGitCommitMessageGroup">
            <add-to-group group-id="Vcs.MessageActionGroup" anchor="first"/>
            <action
                    id="RefactAIGenerateGitCommitMessage"
                    class="com.smallcloud.refactai.listeners.GenerateGitCommitMessageAction" />
        </group>
    </actions>
    <resource-bundle>bundles.RefactAI</resource-bundle>
    <applicationListeners>
        <listener class="com.smallcloud.refactai.listeners.PluginListener"
                  topic="com.intellij.ide.plugins.DynamicPluginListener"
                  activeInHeadlessMode="true"
        />
    </applicationListeners>
</idea-plugin>
